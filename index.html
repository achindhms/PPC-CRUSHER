<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PPC Crusher ‚Äì Quiz Mode</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Exo+2:wght@400;600;700;900&family=Share+Tech+Mono&display=swap');

:root {
  --bg:       #080600;
  --surface:  #111008;
  --surface2: #191408;
  --border:   #2a2010;
  --accent:   #ff9500;
  --gold:     #ffcc00;
  --green:    #39ff14;
  --red:      #ff2525;
  --blue:     #00d4ff;
  --purple:   #c44dff;
  --text:     #f0ddb0;
  --dim:      #5a4820;
  --crush:    #ff4500;
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Exo 2', sans-serif;
  height: 100vh; width: 100vw;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Grid bg */
body::before {
  content:'';
  position:fixed; inset:0;
  background-image:
    linear-gradient(rgba(255,149,0,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,149,0,0.03) 1px, transparent 1px);
  background-size: 44px 44px;
  pointer-events:none; z-index:0;
}

/* Vignette */
body::after {
  content:'';
  position:fixed; inset:0;
  background: radial-gradient(ellipse at 50% 40%, transparent 40%, rgba(0,0,0,0.75) 100%);
  pointer-events:none; z-index:1;
}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
#header {
  position: relative; z-index:10;
  width:100%;
  display:flex; align-items:center; justify-content:space-between;
  padding: 0 28px;
  height: 58px;
  background: linear-gradient(180deg, rgba(255,149,0,0.1), transparent);
  border-bottom: 2px solid var(--accent);
  flex-shrink:0;
}

.logo { display:flex; flex-direction:column; line-height:1; }
.logo-top { font-family:'Black Ops One',cursive; font-size:22px; letter-spacing:3px; }
.logo-ppc { color: var(--accent); text-shadow: 0 0 18px rgba(255,149,0,0.6), 2px 2px 0 #6a3200; }
.logo-crusher { color: var(--gold); text-shadow: 0 0 18px rgba(255,204,0,0.5), 2px 2px 0 #6a4a00; }
.logo-sub { font-size:8px; color:var(--dim); font-family:'Share Tech Mono',monospace; letter-spacing:2px; margin-top:2px; }

/* Stat boxes */
.stat-row { display:flex; gap:8px; align-items:stretch; }
.stat-box {
  background: var(--surface); border:1px solid var(--border);
  border-radius:5px; padding: 4px 14px; text-align:center; min-width:78px;
  position:relative; overflow:hidden;
}
.stat-box::after { content:''; position:absolute; top:0;left:0;right:0; height:2px; background:var(--accent); opacity:0.35; }
.stat-lbl { font-size:8px; color:var(--dim); font-family:'Share Tech Mono',monospace; letter-spacing:2px; }
.stat-val { font-family:'Black Ops One',cursive; font-size:18px; color:var(--accent); line-height:1.1; }
.stat-val.g { color:var(--green); }
.stat-val.r { color:var(--red); }
.stat-val.b { color:var(--blue); }
.stat-val.gold { color:var(--gold); }

/* ‚îÄ‚îÄ LEVEL PROGRESS BAR (top) ‚îÄ‚îÄ */
#level-bar-wrap {
  position: relative; z-index:10;
  width:100%; height:6px;
  background: var(--surface2);
  border-bottom:1px solid var(--border);
  flex-shrink:0;
}
#level-bar-fill {
  height:100%;
  background: linear-gradient(90deg, var(--accent), var(--gold));
  transition: width 0.6s ease;
}
#level-bar-label {
  position:absolute; right:12px; top:-18px;
  font-size:9px; font-family:'Share Tech Mono',monospace;
  color:var(--dim); letter-spacing:2px;
}

/* ‚îÄ‚îÄ MAIN STAGE ‚îÄ‚îÄ */
#stage {
  flex:1; position:relative; z-index:5;
  width:100%; display:flex;
  flex-direction:column; align-items:center; justify-content:center;
  gap:24px; padding:16px;
}

/* Level badge */
#level-badge {
  display:flex; gap:12px; align-items:center;
  background: var(--surface); border:1px solid var(--border);
  border-radius:30px; padding:6px 20px;
}
.level-dot {
  width:24px; height:24px; border-radius:50%;
  border:2px solid var(--border);
  display:flex; align-items:center; justify-content:center;
  font-family:'Black Ops One',cursive; font-size:11px; color:var(--dim);
  transition: all 0.4s;
  position:relative;
}
.level-dot.done    { border-color:var(--green); color:var(--green); background:rgba(57,255,20,0.1); }
.level-dot.active  { border-color:var(--accent); color:var(--accent); background:rgba(255,149,0,0.15); box-shadow:0 0 12px rgba(255,149,0,0.4); }
.level-dot.locked  { opacity:0.4; }
.level-sep { font-size:10px; color:var(--border); font-family:'Share Tech Mono',monospace; }

/* Question counter */
#q-counter {
  font-family:'Share Tech Mono',monospace;
  font-size:11px; color:var(--dim); letter-spacing:3px;
}

/* ‚îÄ‚îÄ TIMER RING ‚îÄ‚îÄ */
#timer-wrap {
  position:relative; width:90px; height:90px;
}
#timer-svg { transform:rotate(-90deg); }
#timer-track { fill:none; stroke:var(--surface2); stroke-width:6; }
#timer-ring  {
  fill:none; stroke:var(--accent); stroke-width:6;
  stroke-linecap:round;
  stroke-dasharray: 226;
  stroke-dashoffset: 0;
  transition: stroke 0.3s;
}
#timer-num {
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-family:'Black Ops One',cursive; font-size:26px; color:var(--accent);
}

/* ‚îÄ‚îÄ KEYWORD CARD ‚îÄ‚îÄ */
#kw-card {
  width: min(480px, 92vw);
  background: var(--surface);
  border-radius:12px;
  padding:24px 28px;
  border:1px solid var(--border);
  box-shadow: 0 0 40px rgba(0,0,0,0.6);
  position:relative; overflow:hidden;
  transition: transform 0.15s;
}
#kw-card::before {
  content:'';
  position:absolute; top:0;left:0;right:0; height:3px;
  background: linear-gradient(90deg, var(--crush), var(--accent), var(--gold));
}

/* Card glow by type */
#kw-card.winner { border-color:rgba(57,255,20,0.35);  box-shadow:0 0 30px rgba(57,255,20,0.08); }
#kw-card.loser  { border-color:rgba(255,37,37,0.35); box-shadow:0 0 30px rgba(255,37,37,0.08); }
#kw-card.mystery{ border-color:rgba(0,212,255,0.3);  box-shadow:0 0 30px rgba(0,212,255,0.06); }

/* Flip animation */
#kw-card.flip-out { animation: flipOut 0.2s ease forwards; }
#kw-card.flip-in  { animation: flipIn  0.2s ease forwards; }
@keyframes flipOut { 0%{transform:rotateY(0) scale(1)} 100%{transform:rotateY(90deg) scale(0.95)} }
@keyframes flipIn  { 0%{transform:rotateY(-90deg) scale(0.95)} 100%{transform:rotateY(0) scale(1)} }

/* Correct/Wrong flash */
#kw-card.flash-correct { animation: flashGreen 0.35s ease; }
#kw-card.flash-wrong   { animation: flashRed   0.35s ease; }
@keyframes flashGreen { 0%,100%{background:var(--surface)} 50%{background:rgba(57,255,20,0.12)} }
@keyframes flashRed   { 0%,100%{background:var(--surface)} 50%{background:rgba(255,37,37,0.12)} }

.card-tag {
  font-size:9px; letter-spacing:3px; font-family:'Share Tech Mono',monospace;
  margin-bottom:10px;
}
.card-tag.winner  { color:var(--green); }
.card-tag.loser   { color:var(--red); }
.card-tag.mystery { color:var(--blue); }

#kw-name {
  font-size:22px; font-weight:900; color:var(--text);
  margin-bottom:18px; letter-spacing:0.5px; line-height:1.2;
}

.metric-row {
  display:grid; grid-template-columns:1fr 1fr 1fr 1fr;
  gap:8px; margin-bottom:8px;
}
.metric-box {
  background:rgba(0,0,0,0.35); border:1px solid var(--border);
  border-radius:6px; padding:8px 4px; text-align:center;
}
.metric-val { font-family:'Share Tech Mono',monospace; font-size:16px; font-weight:700; }
.metric-lbl { font-size:8px; color:var(--dim); letter-spacing:1.5px; margin-top:2px; }

/* Match type hint */
.card-hint {
  font-size:10px; color:var(--dim); font-family:'Share Tech Mono',monospace;
  letter-spacing:1px; margin-bottom:16px;
}

/* ‚îÄ‚îÄ ACTION BUTTONS ‚îÄ‚îÄ */
#action-row {
  display:flex; gap:12px; width: min(480px, 92vw);
}

.act-btn {
  flex:1; padding:14px 8px;
  border:none; border-radius:8px;
  font-family:'Exo 2',sans-serif; font-weight:900; font-size:14px;
  letter-spacing:1px; cursor:pointer;
  display:flex; flex-direction:column; align-items:center; gap:4px;
  transition: all 0.15s;
  position:relative; overflow:hidden;
}
.act-btn::before {
  content:'';
  position:absolute; inset:0;
  background:rgba(255,255,255,0);
  transition:background 0.1s;
}
.act-btn:hover::before { background:rgba(255,255,255,0.06); }
.act-btn:active { transform:scale(0.95); }

.act-btn.disabled { opacity:0.3; pointer-events:none; }

.act-btn .kb { font-size:10px; opacity:0.55; font-family:'Share Tech Mono',monospace; font-weight:400; }

/* Correct/wrong flash on button */
.act-btn.btn-lit-good { animation: btnGlow 0.3s ease; }
.act-btn.btn-lit-bad  { animation: btnShake 0.3s ease; }
@keyframes btnGlow  { 0%,100%{} 50%{filter:brightness(2)} }
@keyframes btnShake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-4px)} 75%{transform:translateX(4px)} }

#btn-crush {
  background: rgba(57,255,20,0.1); border:2px solid rgba(57,255,20,0.45); color:var(--green);
}
#btn-crush:hover { border-color:var(--green); box-shadow:0 0 16px rgba(57,255,20,0.3); }

#btn-kill  {
  background: rgba(255,37,37,0.1); border:2px solid rgba(255,37,37,0.45); color:var(--red);
}
#btn-kill:hover  { border-color:var(--red);   box-shadow:0 0 16px rgba(255,37,37,0.3); }

#btn-spy   {
  background: rgba(0,212,255,0.08); border:2px solid rgba(0,212,255,0.4); color:var(--blue); flex:0.7;
}
#btn-spy:hover   { border-color:var(--blue);  box-shadow:0 0 16px rgba(0,212,255,0.25); }

/* ‚îÄ‚îÄ FEEDBACK STRIP ‚îÄ‚îÄ */
#feedback {
  width: min(480px, 92vw); min-height:34px;
  display:flex; align-items:center; justify-content:center;
  font-family:'Share Tech Mono',monospace; font-size:12px; letter-spacing:1.5px;
  border-radius:6px; padding:6px 14px; text-align:center;
  opacity:0; transition:opacity 0.25s;
}
#feedback.show { opacity:1; }
#feedback.correct { background:rgba(57,255,20,0.08); border:1px solid rgba(57,255,20,0.25); color:var(--green); }
#feedback.wrong   { background:rgba(255,37,37,0.08);  border:1px solid rgba(255,37,37,0.25);  color:var(--red);   }
#feedback.timeout { background:rgba(255,149,0,0.08);  border:1px solid rgba(255,149,0,0.25);  color:var(--accent);}

/* ‚îÄ‚îÄ BOTTOM SCORE ROW ‚îÄ‚îÄ */
#score-row {
  display:flex; gap:10px; align-items:center;
  font-family:'Share Tech Mono',monospace; font-size:11px; color:var(--dim); letter-spacing:1.5px;
  padding-bottom:4px;
}
.score-pill {
  background:var(--surface); border:1px solid var(--border);
  border-radius:20px; padding:4px 12px;
  display:flex; gap:6px; align-items:center;
}
.score-pill-val { font-family:'Black Ops One',cursive; font-size:15px; color:var(--accent); }
.score-pill-val.g { color:var(--green); }
.score-pill-val.r { color:var(--red); }

/* Float text FX */
.float-fx {
  position:fixed; font-family:'Black Ops One',cursive; font-size:22px;
  pointer-events:none; z-index:100;
  animation: floatUp 1.1s ease forwards;
  text-shadow:0 2px 8px rgba(0,0,0,0.8);
  white-space:nowrap;
}
@keyframes floatUp { 0%{opacity:1;transform:translateY(0) scale(1)} 100%{opacity:0;transform:translateY(-80px) scale(1.25)} }

/* ‚îÄ‚îÄ OVERLAYS ‚îÄ‚îÄ */
.overlay {
  position:fixed; inset:0; z-index:200;
  display:flex; align-items:center; justify-content:center;
  background:rgba(8,6,0,0.93); backdrop-filter:blur(12px);
}
.ov-card {
  background:var(--surface); border:2px solid var(--accent);
  border-radius:14px; padding:36px 48px; text-align:center;
  max-width:520px; width:92%; position:relative; overflow:hidden;
  box-shadow:0 0 80px rgba(255,149,0,0.18);
}
.ov-card::before { content:''; position:absolute; top:0;left:0;right:0; height:3px; background:linear-gradient(90deg,var(--crush),var(--accent),var(--gold)); }

.ov-title { font-family:'Black Ops One',cursive; font-size:32px; color:var(--accent); text-shadow:0 0 30px rgba(255,149,0,0.5),3px 3px 0 #5a2e00; margin-bottom:6px; }
.ov-sub   { font-size:11px; color:var(--dim); font-family:'Share Tech Mono',monospace; letter-spacing:2px; line-height:1.9; margin-bottom:22px; }

.rules-box { background:var(--surface2); border:1px solid var(--border); border-radius:8px; padding:16px; margin-bottom:22px; text-align:left; display:flex; flex-direction:column; gap:8px; }
.rule-row  { font-size:12px; font-family:'Share Tech Mono',monospace; display:flex; gap:10px; align-items:center; }

.levels-preview {
  display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:24px;
}
.lv-box {
  background:var(--surface2); border:1px solid var(--border);
  border-radius:8px; padding:12px; text-align:left;
}
.lv-name  { font-family:'Black Ops One',cursive; font-size:14px; color:var(--accent); }
.lv-desc  { font-size:9px; color:var(--dim); font-family:'Share Tech Mono',monospace; letter-spacing:1px; margin-top:3px; line-height:1.5; }

.stat-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:24px; }
.sg-box { background:var(--surface2); border:1px solid var(--border); border-radius:8px; padding:12px; }
.sg-val { font-family:'Black Ops One',cursive; font-size:24px; color:var(--accent); }
.sg-lbl { font-size:9px; color:var(--dim); letter-spacing:2px; font-family:'Share Tech Mono',monospace; }

.cta { background:linear-gradient(135deg,var(--crush),var(--accent)); border:none; color:#000; font-family:'Black Ops One',cursive; font-size:16px; padding:14px 38px; border-radius:7px; cursor:pointer; letter-spacing:3px; transition:all 0.2s; box-shadow:0 4px 22px rgba(255,69,0,0.4); }
.cta:hover { transform:scale(1.05); box-shadow:0 4px 32px rgba(255,149,0,0.6); }
.cta.outline { background:transparent; border:2px solid var(--accent); color:var(--accent); }
.cta.outline:hover { background:rgba(255,149,0,0.1); }

/* Level complete overlay specifics */
#lv-screen .stars { font-size:38px; margin-bottom:8px; letter-spacing:4px; }
#lv-screen .lv-score-big { font-family:'Black Ops One',cursive; font-size:52px; color:var(--gold); text-shadow:0 0 30px rgba(255,204,0,0.6); line-height:1; margin:10px 0; }
#lv-screen .lv-label { font-size:10px; color:var(--dim); font-family:'Share Tech Mono',monospace; letter-spacing:3px; }

/* Final results */
#final-screen .final-score { font-family:'Black Ops One',cursive; font-size:60px; color:var(--gold); text-shadow:0 0 40px rgba(255,204,0,0.6); line-height:1; }
#final-screen .final-rank  { font-size:11px; color:var(--accent); font-family:'Share Tech Mono',monospace; letter-spacing:4px; margin:6px 0 18px; }

/* ACOS display large */
.acos-display {
  display:flex; flex-direction:column; align-items:center; gap:2px;
  background:rgba(255,69,0,0.07); border:1px solid rgba(255,69,0,0.3);
  border-radius:8px; padding:10px 20px;
}
.acos-big { font-family:'Black Ops One',cursive; font-size:28px; }
.acos-lbl { font-size:8px; color:var(--dim); font-family:'Share Tech Mono',monospace; letter-spacing:3px; }

/* Countdown pulse when low */
#timer-num.danger { color:var(--red) !important; animation:danger-pulse 0.5s infinite; }
@keyframes danger-pulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.2)} }
#timer-ring.danger { stroke:var(--red) !important; }
</style>
</head>
<body>

<!-- HEADER -->
<div id="header">
  <div class="logo">
    <div class="logo-top"><span class="logo-ppc">PPC</span> <span class="logo-crusher">CRUSHER</span></div>
    <div class="logo-sub">‚öõ POWERED BY ATOM11 ¬∑ QUIZ MODE</div>
  </div>
  <div class="stat-row">
    <div class="stat-box"><div class="stat-lbl">SCORE</div><div class="stat-val" id="h-score">0</div></div>
    <div class="stat-box"><div class="stat-lbl">CORRECT</div><div class="stat-val g" id="h-correct">0</div></div>
    <div class="stat-box"><div class="stat-lbl">WRONG</div><div class="stat-val r" id="h-wrong">0</div></div>
    <div class="stat-box"><div class="stat-lbl">ACOS</div><div class="stat-val" id="h-acos">30%</div></div>
    <div class="stat-box"><div class="stat-lbl">STREAK</div><div class="stat-val gold" id="h-streak">0</div></div>
  </div>
</div>

<!-- LEVEL PROGRESS BAR -->
<div id="level-bar-wrap">
  <div id="level-bar-fill" style="width:0%"></div>
</div>

<!-- STAGE -->
<div id="stage">

  <!-- Level indicator -->
  <div id="level-badge">
    <div class="level-dot locked" id="dot1">1</div>
    <span class="level-sep">‚îÄ‚îÄ</span>
    <div class="level-dot locked" id="dot2">2</div>
    <span class="level-sep">‚îÄ‚îÄ</span>
    <div class="level-dot locked" id="dot3">3</div>
    <span class="level-sep">‚îÄ‚îÄ</span>
    <div class="level-dot locked" id="dot4">4</div>
  </div>

  <!-- Question counter -->
  <div id="q-counter">QUESTION 1 OF 8</div>

  <!-- Timer + Card row -->
  <div style="display:flex; align-items:center; gap:20px; width:min(580px,96vw);">

    <!-- Timer -->
    <div id="timer-wrap">
      <svg id="timer-svg" width="90" height="90" viewBox="0 0 90 90">
        <circle class="" id="timer-track" cx="45" cy="45" r="36"/>
        <circle id="timer-ring" cx="45" cy="45" r="36"/>
      </svg>
      <div id="timer-num">10</div>
    </div>

    <!-- Keyword Card -->
    <div id="kw-card" style="flex:1;">
      <div class="card-tag" id="card-tag">‚óè WINNER</div>
      <div id="kw-name">Loading...</div>
      <div class="metric-row" id="metric-row">
        <div class="metric-box"><div class="metric-val" id="m-acos">12%</div><div class="metric-lbl">ACOS</div></div>
        <div class="metric-box"><div class="metric-val" id="m-ctr">0.8%</div><div class="metric-lbl">CTR</div></div>
        <div class="metric-box"><div class="metric-val" id="m-cvr">9.2%</div><div class="metric-lbl">CVR</div></div>
        <div class="metric-box"><div class="metric-val" id="m-spend">$45</div><div class="metric-lbl">SPEND</div></div>
      </div>
      <div class="card-hint" id="card-hint">MATCH TYPE: EXACT ¬∑ BID: $1.45</div>
    </div>

  </div>

  <!-- Action Buttons -->
  <div id="action-row">
    <button id="btn-crush" class="act-btn" onclick="answer('crush')">
      <span>‚ö° CRUSH IT</span>
      <span class="kb">Press Q</span>
    </button>
    <button id="btn-kill" class="act-btn" onclick="answer('kill')">
      <span>üíÄ KILL IT</span>
      <span class="kb">Press W</span>
    </button>
    <button id="btn-spy" class="act-btn" onclick="answer('spy')">
      <span>üîç SPY</span>
      <span class="kb">Press E</span>
    </button>
  </div>

  <!-- Feedback -->
  <div id="feedback"></div>

  <!-- Score row -->
  <div id="score-row">
    <div class="score-pill"><span style="color:var(--dim)">LEVEL</span> <span class="score-pill-val" id="s-level">1</span></div>
    <div class="score-pill"><span style="color:var(--dim)">MULTIPLIER</span> <span class="score-pill-val gold" id="s-multi">√ó1.0</span></div>
    <div class="score-pill"><span class="score-pill-val g" id="s-correct">0</span><span style="color:var(--dim)">‚úì</span> <span class="score-pill-val r" id="s-wrong">0</span><span style="color:var(--dim)">‚úó</span></div>
  </div>

</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- START SCREEN -->
<div class="overlay" id="start-screen">
  <div class="ov-card">
    <div style="font-size:46px;margin-bottom:6px;">üí•</div>
    <div class="ov-title">PPC CRUSHER</div>
    <div class="ov-sub">QUIZ MODE ¬∑ 4 LEVELS ¬∑ 10 SECONDS PER QUESTION</div>
    <div class="rules-box">
      <div class="rule-row"><span style="color:var(--green)">‚ö° CRUSH [Q]</span> ‚Äî Keyword has good ACOS. Raise the bid!</div>
      <div class="rule-row"><span style="color:var(--red)">üíÄ KILL [W]</span> ‚Äî Keyword is wasting money. Pause it!</div>
      <div class="rule-row"><span style="color:var(--blue)">üîç SPY [E]</span> ‚Äî Unknown keyword. Needs investigation.</div>
      <div class="rule-row"><span style="color:var(--accent)">‚è± 10 SEC</span> ‚Äî Answer each question before time runs out.</div>
    </div>
    <div class="levels-preview">
      <div class="lv-box"><div class="lv-name">LVL 1 ¬∑ BEGINNER</div><div class="lv-desc">8 questions ¬∑ Obvious signals ¬∑ 10s each ¬∑ Learn the basics</div></div>
      <div class="lv-box"><div class="lv-name">LVL 2 ¬∑ INTERMEDIATE</div><div class="lv-desc">10 questions ¬∑ Mixed signals ¬∑ 9s each ¬∑ Getting tricky</div></div>
      <div class="lv-box"><div class="lv-name">LVL 3 ¬∑ ADVANCED</div><div class="lv-desc">12 questions ¬∑ Deceptive data ¬∑ 8s each ¬∑ Expert territory</div></div>
      <div class="lv-box"><div class="lv-name">LVL 4 ¬∑ EXPERT</div><div class="lv-desc">15 questions ¬∑ Atom11-level ¬∑ 7s each ¬∑ Only the best survive</div></div>
    </div>
    <button class="cta" onclick="startGame()">START CAMPAIGN ‚Üí</button>
  </div>
</div>

<!-- LEVEL COMPLETE SCREEN -->
<div class="overlay" id="lv-screen" style="display:none">
  <div class="ov-card">
    <div class="stars" id="lv-stars">‚≠ê‚≠ê‚≠ê</div>
    <div class="ov-title" id="lv-title">LEVEL 1 COMPLETE!</div>
    <div class="lv-score-big" id="lv-pts">+1200</div>
    <div class="lv-label">POINTS EARNED THIS LEVEL</div>
    <div class="stat-grid" style="margin-top:18px;">
      <div class="sg-box"><div class="sg-val" id="lv-acc">75%</div><div class="sg-lbl">ACCURACY</div></div>
      <div class="sg-box"><div class="sg-val" id="lv-acos">28%</div><div class="sg-lbl">ACOS ACHIEVED</div></div>
      <div class="sg-box"><div class="sg-val" id="lv-streak">3</div><div class="sg-lbl">BEST STREAK</div></div>
      <div class="sg-box"><div class="sg-val" id="lv-bonus">+200</div><div class="sg-lbl">SPEED BONUS</div></div>
    </div>
    <button class="cta" id="lv-next-btn" onclick="nextLevel()">NEXT LEVEL ‚Üí</button>
  </div>
</div>

<!-- FINAL SCREEN -->
<div class="overlay" id="final-screen" style="display:none">
  <div class="ov-card">
    <div style="font-size:44px;margin-bottom:6px;" id="final-emoji">üèÜ</div>
    <div class="ov-title">CAMPAIGN COMPLETE!</div>
    <div class="final-score" id="final-score">0</div>
    <div class="final-rank" id="final-rank">PPC SPECIALIST</div>
    <div class="stat-grid">
      <div class="sg-box"><div class="sg-val" id="f-correct">0</div><div class="sg-lbl">CORRECT</div></div>
      <div class="sg-box"><div class="sg-val" id="f-wrong">0</div><div class="sg-lbl">WRONG</div></div>
      <div class="sg-box">
        <div class="acos-display">
          <div class="acos-big" id="f-acos">30%</div>
          <div class="acos-lbl">FINAL ACOS</div>
        </div>
      </div>
      <div class="sg-box"><div class="sg-val" id="f-streak">0</div><div class="sg-lbl">BEST STREAK</div></div>
    </div>
    <div style="display:flex;gap:10px;justify-content:center;">
      <button class="cta outline" onclick="restartGame()">PLAY AGAIN</button>
    </div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  LEVEL CONFIG
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const LEVELS = [
  { num:1, name:'Beginner',     qCount:8,  timeLimit:10, label:'LVL 1 ¬∑ BEGINNER',     winPts:150, wrongPts:-60  },
  { num:2, name:'Intermediate', qCount:10, timeLimit:9,  label:'LVL 2 ¬∑ INTERMEDIATE', winPts:200, wrongPts:-80  },
  { num:3, name:'Advanced',     qCount:12, timeLimit:8,  label:'LVL 3 ¬∑ ADVANCED',     winPts:280, wrongPts:-100 },
  { num:4, name:'Expert',       qCount:15, timeLimit:7,  label:'LVL 4 ¬∑ EXPERT',       winPts:380, wrongPts:-120 },
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  KEYWORD BANKS ‚Äî per level difficulty
//  type: 'winner'|'loser'|'mystery'
//  hint: shown as match type / bid info
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const QBanks = {
  // Level 1 ‚Äî clear, unambiguous signals
  1: [
    { kw:'wireless earbuds pro',  type:'winner',  acos:'9%',  ctr:'1.1%', cvr:'14%', spend:'$82',  hint:'EXACT MATCH ¬∑ BID: $1.20', tag:'HIGH PERFORMER' },
    { kw:'cheap free giveaway',   type:'loser',   acos:'87%', ctr:'0.1%', cvr:'0.3%',spend:'$210', hint:'BROAD MATCH ¬∑ BID: $2.80',  tag:'BUDGET DRAIN' },
    { kw:'yoga mat premium',      type:'winner',  acos:'13%', ctr:'0.9%', cvr:'11%', spend:'$60',  hint:'PHRASE MATCH ¬∑ BID: $0.95', tag:'STEADY EARNER' },
    { kw:'competitor brand xyz',  type:'loser',   acos:'94%', ctr:'0.08%',cvr:'0.1%',spend:'$310', hint:'BROAD MATCH ¬∑ BID: $3.10',  tag:'WASTED SPEND' },
    { kw:'protein powder vanilla',type:'winner',  acos:'11%', ctr:'1.2%', cvr:'13%', spend:'$95',  hint:'EXACT MATCH ¬∑ BID: $1.50',  tag:'CONVERTING WELL' },
    { kw:'unknown trending term', type:'mystery', acos:'32%', ctr:'0.4%', cvr:'4.5%',spend:'$28',  hint:'AUTO CAMPAIGN ¬∑ NEW',        tag:'NEEDS RESEARCH' },
    { kw:'air fryer 6qt xl',      type:'winner',  acos:'8%',  ctr:'1.4%', cvr:'16%', spend:'$120', hint:'EXACT MATCH ¬∑ BID: $1.10',  tag:'TOP PERFORMER' },
    { kw:'invalid test keyword',  type:'loser',   acos:'99%', ctr:'0.05%',cvr:'0%',  spend:'$45',  hint:'BROAD MATCH ¬∑ TEST BID',     tag:'ZERO CONVERSIONS' },
  ],

  // Level 2 ‚Äî mixed signals, some tricks
  2: [
    { kw:'coffee grinder burr',   type:'winner',  acos:'18%', ctr:'0.7%', cvr:'8%',  spend:'$140', hint:'PHRASE MATCH ¬∑ BID: $1.80',  tag:'GOOD MARGIN' },
    { kw:'bulk wholesale lot 500',type:'loser',   acos:'72%', ctr:'0.2%', cvr:'1.1%',spend:'$190', hint:'BROAD MATCH ¬∑ BID: $2.20',   tag:'LOW RELEVANCE' },
    { kw:'seasonal gift ideas',   type:'mystery', acos:'28%', ctr:'0.5%', cvr:'3.8%',spend:'$55',  hint:'AUTO CAMPAIGN ¬∑ SEASONAL',   tag:'INVESTIGATE FIRST' },
    { kw:'memory foam pillow',    type:'winner',  acos:'15%', ctr:'0.8%', cvr:'9%',  spend:'$88',  hint:'EXACT MATCH ¬∑ BID: $1.30',   tag:'CONSISTENT ROI' },
    { kw:'review manipulation',   type:'loser',   acos:'81%', ctr:'0.15%',cvr:'0.5%',spend:'$240', hint:'BROAD MATCH ¬∑ FLAGGED',       tag:'POLICY RISK' },
    { kw:'bamboo cutting board',  type:'winner',  acos:'12%', ctr:'1.0%', cvr:'12%', spend:'$75',  hint:'EXACT MATCH ¬∑ BID: $0.90',   tag:'HIGH CONVERTER' },
    { kw:'kitchen gadgets 2024',  type:'mystery', acos:'35%', ctr:'0.3%', cvr:'2.9%',spend:'$42',  hint:'AUTO ¬∑ EXPLORING TARGETING',  tag:'DATA NEEDED' },
    { kw:'dog harness no-pull',   type:'winner',  acos:'16%', ctr:'0.9%', cvr:'10%', spend:'$65',  hint:'PHRASE MATCH ¬∑ BID: $1.10',  tag:'LOYAL BUYERS' },
    { kw:'cheap knockoff brand',  type:'loser',   acos:'78%', ctr:'0.12%',cvr:'0.4%',spend:'$180', hint:'BROAD ¬∑ COMPETITOR TRAFFIC', tag:'WASTED BUDGET' },
    { kw:'eco friendly packaging',type:'mystery', acos:'40%', ctr:'0.25%',cvr:'2.1%',spend:'$30',  hint:'AUTO ¬∑ NICHE OPPORTUNITY',    tag:'TEST MORE' },
  ],

  // Level 3 ‚Äî advanced, misleading data
  3: [
    { kw:'led desk lamp usb',     type:'winner',  acos:'20%', ctr:'0.6%', cvr:'7%',  spend:'$200', hint:'PHRASE MATCH ¬∑ BID: $2.10',  tag:'VOLUME DRIVER' },
    { kw:'high ctr low conv',     type:'loser',   acos:'65%', ctr:'1.8%', cvr:'1.0%',spend:'$300', hint:'BROAD MATCH ¬∑ HIGH CTR',     tag:'CLICKS ‚â† SALES' },
    { kw:'vitamin d3 5000iu',     type:'winner',  acos:'14%', ctr:'0.85%',cvr:'10%', spend:'$110', hint:'EXACT MATCH ¬∑ BID: $1.60',  tag:'REPEAT BUYERS' },
    { kw:'outdoor seasonal term', type:'mystery', acos:'38%', ctr:'0.35%',cvr:'3.2%',spend:'$60',  hint:'AUTO ¬∑ SEASONAL SIGNAL',     tag:'WORTH EXPLORING' },
    { kw:'fitness tracker band',  type:'winner',  acos:'17%', ctr:'0.75%',cvr:'8.5%',spend:'$160', hint:'EXACT MATCH ¬∑ BID: $1.40',  tag:'SOLID PERFORMER' },
    { kw:'fake clickfarm term',   type:'loser',   acos:'91%', ctr:'3.2%', cvr:'0.2%',spend:'$420', hint:'BROAD ¬∑ SUSPICIOUS TRAFFIC', tag:'BOT CLICKS?' },
    { kw:'cast iron skillet 12"', type:'winner',  acos:'19%', ctr:'0.7%', cvr:'8%',  spend:'$90',  hint:'PHRASE MATCH ¬∑ BID: $1.75',  tag:'KITCHEN STAPLE' },
    { kw:'moderate acos signal',  type:'mystery', acos:'30%', ctr:'0.45%',cvr:'4.0%',spend:'$80',  hint:'AUTO ¬∑ BORDERLINE DATA',     tag:'INVESTIGATE' },
    { kw:'noise cancel headset',  type:'winner',  acos:'21%', ctr:'0.65%',cvr:'7.5%',spend:'$230', hint:'EXACT MATCH ¬∑ BID: $2.50',  tag:'PREMIUM BUYER' },
    { kw:'unrelated broad term',  type:'loser',   acos:'88%', ctr:'0.1%', cvr:'0.3%',spend:'$195', hint:'BROAD MATCH ¬∑ OFF-TOPIC',    tag:'WRONG AUDIENCE' },
    { kw:'instant pot 8qt',       type:'winner',  acos:'16%', ctr:'0.9%', cvr:'9.5%',spend:'$145', hint:'EXACT MATCH ¬∑ BID: $1.60',  tag:'KITCHEN HERO' },
    { kw:'trending niche 2024',   type:'mystery', acos:'25%', ctr:'0.6%', cvr:'5.0%',spend:'$35',  hint:'AUTO ¬∑ NEW OPPORTUNITY',     tag:'POTENTIAL HIT' },
  ],

  // Level 4 ‚Äî expert, very subtle differences
  4: [
    { kw:'electric toothbrush pro',type:'winner',  acos:'22%', ctr:'0.6%', cvr:'6.8%',spend:'$310', hint:'EXACT MATCH ¬∑ BID: $2.80',  tag:'SUBSCRIPTION DRIVER' },
    { kw:'good ctr bad acos',      type:'loser',   acos:'55%', ctr:'1.5%', cvr:'2.5%',spend:'$380', hint:'BROAD MATCH ¬∑ MISLEADING',  tag:'ACOS TOO HIGH' },
    { kw:'portable charger 20k',   type:'winner',  acos:'19%', ctr:'0.8%', cvr:'8.5%',spend:'$175', hint:'PHRASE MATCH ¬∑ BID: $1.90', tag:'SOLID ROAS' },
    { kw:'borderline mystery kw',  type:'mystery', acos:'28%', ctr:'0.5%', cvr:'4.5%',spend:'$90',  hint:'AUTO ¬∑ MIXED SIGNALS',      tag:'REQUIRES ANALYSIS' },
    { kw:'resistance bands set',   type:'winner',  acos:'18%', ctr:'0.75%',cvr:'8%',  spend:'$130', hint:'EXACT MATCH ¬∑ BID: $1.30',  tag:'FITNESS WINNER' },
    { kw:'looks good actually bad',type:'loser',   acos:'48%', ctr:'0.9%', cvr:'3.5%',spend:'$280', hint:'PHRASE MATCH ¬∑ ABOVE TACoS',tag:'SLIM MARGIN' },
    { kw:'stand mixer 7qt pro',    type:'winner',  acos:'20%', ctr:'0.7%', cvr:'7.2%',spend:'$210', hint:'EXACT MATCH ¬∑ BID: $2.20',  tag:'HIGH AOV ITEM' },
    { kw:'emerging category kw',   type:'mystery', acos:'33%', ctr:'0.4%', cvr:'3.8%',spend:'$65',  hint:'AUTO ¬∑ CATEGORY EXPLORING', tag:'POTENTIAL' },
    { kw:'reusable grocery bags',  type:'winner',  acos:'15%', ctr:'0.95%',cvr:'10%', spend:'$85',  hint:'EXACT MATCH ¬∑ BID: $0.85',  tag:'ECO BUYER' },
    { kw:'high spend low return',  type:'loser',   acos:'61%', ctr:'0.7%', cvr:'2.8%',spend:'$450', hint:'BROAD MATCH ¬∑ HIGH SPEND',  tag:'EFFICIENCY PROBLEM' },
    { kw:'blue light glasses',     type:'winner',  acos:'17%', ctr:'0.85%',cvr:'9%',  spend:'$120', hint:'PHRASE MATCH ¬∑ BID: $1.20', tag:'WFH ESSENTIALS' },
    { kw:'ambiguous volume term',  type:'mystery', acos:'36%', ctr:'0.3%', cvr:'2.5%',spend:'$75',  hint:'AUTO ¬∑ VOLUME BUT UNCLEAR', tag:'INVESTIGATE' },
    { kw:'essential oil diffuser', type:'winner',  acos:'23%', ctr:'0.65%',cvr:'6.5%',spend:'$195', hint:'EXACT MATCH ¬∑ BID: $2.10',  tag:'LIFESTYLE BUYER' },
    { kw:'near-break-even loser',  type:'loser',   acos:'42%', ctr:'0.8%', cvr:'4.0%',spend:'$200', hint:'PHRASE MATCH ¬∑ ABOVE TACOS',tag:'NOT PROFITABLE' },
    { kw:'stainless water bottle', type:'winner',  acos:'14%', ctr:'1.0%', cvr:'11%', spend:'$160', hint:'EXACT MATCH ¬∑ BID: $1.10',  tag:'DAILY ESSENTIAL' },
  ],
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  STATE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let G = {
  levelIdx:    0,        // 0-3
  qIdx:        0,        // current question index within level
  queue:       [],       // shuffled questions for current level
  score:       0,
  correct:     0,
  wrong:       0,
  acos:        30,
  streak:      0,
  bestStreak:  0,
  multiplier:  1.0,
  speedBonus:  0,        // bonus accumulated this level for fast answers
  timerVal:    10,
  timerMax:    10,
  timerInt:    null,
  answered:    false,
  running:     false,
  lvlCorrect:  0,
  lvlWrong:    0,
  lvlPts:      0,
  lvlSpeedBonus:0,
};

const CIRCUMFERENCE = 2 * Math.PI * 36; // ~226

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  GAME FLOW
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function startGame() {
  document.getElementById('start-screen').style.display = 'none';
  G.running = true;
  G.levelIdx = 0;
  G.score = 0; G.correct = 0; G.wrong = 0;
  G.acos = 30; G.streak = 0; G.bestStreak = 0;
  G.multiplier = 1.0;
  startLevel();
}

function startLevel() {
  const lv = LEVELS[G.levelIdx];
  G.qIdx = 0;
  G.lvlCorrect = 0; G.lvlWrong = 0; G.lvlPts = 0; G.lvlSpeedBonus = 0;
  G.timerMax = lv.timeLimit;

  // Shuffle and pick questions
  const bank = [...QBanks[lv.num]].sort(() => Math.random() - 0.5).slice(0, lv.qCount);
  G.queue = bank;

  // Update level dots
  for (let i = 1; i <= 4; i++) {
    const dot = document.getElementById('dot'+i);
    dot.className = 'level-dot ' + (i < lv.num ? 'done' : i === lv.num ? 'active' : 'locked');
  }

  document.getElementById('s-level').textContent = lv.num;
  updateProgressBar();
  showQuestion();
}

function showQuestion() {
  const lv  = LEVELS[G.levelIdx];
  const q   = G.queue[G.qIdx];
  G.answered = false;

  enableButtons();
  clearFeedback();

  // Update counter
  document.getElementById('q-counter').textContent =
    'LEVEL ' + lv.num + ' ¬∑ QUESTION ' + (G.qIdx + 1) + ' OF ' + lv.qCount;

  // Flip card in
  const card = document.getElementById('kw-card');
  card.className = 'kw-card flip-out';
  setTimeout(() => {
    // Fill card
    const typeColor = q.type==='winner'?'var(--green)':q.type==='loser'?'var(--red)':'var(--blue)';
    const typeLabel = q.type==='winner'?'‚óè WINNER SIGNAL':q.type==='loser'?'‚óè LOSER SIGNAL':'‚óè UNKNOWN SIGNAL';
    document.getElementById('card-tag').textContent = typeLabel;
    document.getElementById('card-tag').className   = 'card-tag ' + q.type;
    document.getElementById('kw-name').textContent  = q.kw.toUpperCase();
    document.getElementById('m-acos').textContent   = q.acos;
    document.getElementById('m-ctr').textContent    = q.ctr;
    document.getElementById('m-cvr').textContent    = q.cvr;
    document.getElementById('m-spend').textContent  = q.spend;
    document.getElementById('card-hint').textContent= q.hint;

    // Color ACOS value
    const acosNum = parseFloat(q.acos);
    document.getElementById('m-acos').style.color = acosNum < 30 ? 'var(--green)' : acosNum < 50 ? 'var(--accent)' : 'var(--red)';

    // Card border class
    card.className = 'kw-card flip-in';

    startTimer();
  }, 200);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  TIMER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function startTimer() {
  clearInterval(G.timerInt);
  G.timerVal = G.timerMax;
  renderTimer(G.timerVal);

  G.timerInt = setInterval(() => {
    G.timerVal -= 0.05;
    renderTimer(G.timerVal);
    if (G.timerVal <= 0) {
      clearInterval(G.timerInt);
      if (!G.answered) onTimeout();
    }
  }, 50);
}

function renderTimer(val) {
  const v = Math.max(0, val);
  const frac = v / G.timerMax;
  const offset = CIRCUMFERENCE * (1 - frac);
  const ring = document.getElementById('timer-ring');
  const num  = document.getElementById('timer-num');
  ring.style.strokeDashoffset = offset;
  num.textContent = Math.ceil(v);

  const isDanger = v <= 3;
  ring.className = isDanger ? 'danger' : '';
  num.className  = isDanger ? 'danger' : '';

  // Colour ring by time left
  if      (frac > 0.6) ring.style.stroke = 'var(--green)';
  else if (frac > 0.3) ring.style.stroke = 'var(--accent)';
  else                 ring.style.stroke = 'var(--red)';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  ANSWER HANDLING
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function answer(action) {
  if (G.answered || !G.running) return;
  G.answered = true;
  clearInterval(G.timerInt);
  disableButtons();

  const q = G.queue[G.qIdx];
  const correct =
    (action==='crush' && q.type==='winner') ||
    (action==='kill'  && q.type==='loser')  ||
    (action==='spy'   && q.type==='mystery');

  const timeUsed  = G.timerMax - G.timerVal;
  const speedPts  = correct ? Math.round(Math.max(0, (G.timerVal / G.timerMax) * 80)) : 0;

  if (correct) {
    G.streak++;
    G.bestStreak = Math.max(G.bestStreak, G.streak);
    if (G.streak >= 3) G.multiplier = Math.min(1.0 + (G.streak - 2) * 0.25, 3.0);
    const lv = LEVELS[G.levelIdx];
    const pts = Math.round(lv.winPts * G.multiplier) + speedPts;
    G.score      += pts;
    G.lvlPts     += pts;
    G.lvlSpeedBonus += speedPts;
    G.correct++;
    G.lvlCorrect++;
    G.acos = Math.max(5, G.acos - 3);

    showFeedback('correct',
      '‚úÖ CORRECT! ' + explainCorrect(action) + ' +' + pts + ' pts' + (speedPts > 0 ? ' (+'+speedPts+' speed)' : ''));
    flashCard('correct');
    flashBtn(action, true);
    floatFx('+' + pts, 'var(--green)');
  } else {
    G.streak = 0; G.multiplier = 1.0;
    const lv = LEVELS[G.levelIdx];
    const pen = lv.wrongPts;
    G.score   = Math.max(0, G.score + pen);
    G.lvlPts  = Math.max(0, G.lvlPts + pen);
    G.wrong++;
    G.lvlWrong++;
    G.acos = Math.min(80, G.acos + 5);

    showFeedback('wrong',
      '‚ùå WRONG! ' + explainWrong(action, q.type) + ' ' + pen + ' pts');
    flashCard('wrong');
    flashBtn(action, false);
    floatFx('' + pen, 'var(--red)');
  }

  updateHUD();
  scheduleNext();
}

function onTimeout() {
  G.answered = true;
  disableButtons();
  const q = G.queue[G.qIdx];
  G.streak = 0; G.multiplier = 1.0;
  G.acos = Math.min(80, G.acos + 4);
  G.wrong++;
  G.lvlWrong++;
  const lv = LEVELS[G.levelIdx];
  G.score  = Math.max(0, G.score + lv.wrongPts);
  G.lvlPts = Math.max(0, G.lvlPts + lv.wrongPts);

  showFeedback('timeout', '‚è± TIME\'S UP! The correct answer was: ' + correctLabel(q.type));
  floatFx('TIMEOUT', 'var(--accent)');
  updateHUD();
  scheduleNext();
}

function scheduleNext() {
  setTimeout(() => {
    G.qIdx++;
    updateProgressBar();
    const lv = LEVELS[G.levelIdx];
    if (G.qIdx >= lv.qCount) {
      endLevel();
    } else {
      showQuestion();
    }
  }, 1800);
}

function endLevel() {
  G.running = false;
  clearInterval(G.timerInt);

  const lv  = LEVELS[G.levelIdx];
  const total = G.lvlCorrect + G.lvlWrong;
  const acc   = total > 0 ? Math.round(G.lvlCorrect / total * 100) : 0;

  // Stars
  const stars = acc >= 90 ? '‚≠ê‚≠ê‚≠ê' : acc >= 70 ? '‚≠ê‚≠ê' : '‚≠ê';

  document.getElementById('lv-stars').textContent = stars;
  document.getElementById('lv-title').textContent = 'LEVEL ' + lv.num + ' COMPLETE!';
  document.getElementById('lv-pts').textContent   = (G.lvlPts >= 0 ? '+' : '') + G.lvlPts;
  document.getElementById('lv-acc').textContent   = acc + '%';
  document.getElementById('lv-acos').textContent  = Math.round(G.acos) + '%';
  document.getElementById('lv-streak').textContent= G.bestStreak;
  document.getElementById('lv-bonus').textContent = '+' + G.lvlSpeedBonus;

  const nextBtn = document.getElementById('lv-next-btn');
  if (G.levelIdx >= 3) {
    nextBtn.textContent = 'SEE FINAL RESULTS ‚Üí';
  } else {
    nextBtn.textContent = 'NEXT LEVEL ‚Üí';
  }

  document.getElementById('lv-screen').style.display = 'flex';
}

function nextLevel() {
  document.getElementById('lv-screen').style.display = 'none';
  G.levelIdx++;
  if (G.levelIdx >= 4) {
    showFinal();
  } else {
    G.running = true;
    startLevel();
  }
}

function showFinal() {
  const total = G.correct + G.wrong;
  const acc   = total > 0 ? Math.round(G.correct / total * 100) : 0;
  const rank  = acc >= 90 ? 'ATOM11 PPC MASTER üèÜ' :
                acc >= 75 ? 'PPC EXPERT ‚≠ê‚≠ê‚≠ê' :
                acc >= 60 ? 'PPC SPECIALIST ‚≠ê‚≠ê' :
                            'PPC APPRENTICE ‚≠ê';

  document.getElementById('final-score').textContent = G.score.toLocaleString();
  document.getElementById('final-rank').textContent  = rank;
  document.getElementById('f-correct').textContent   = G.correct;
  document.getElementById('f-wrong').textContent     = G.wrong;
  document.getElementById('f-acos').textContent      = Math.round(G.acos) + '%';
  document.getElementById('f-acos').style.color      = G.acos < 30 ? 'var(--green)' : G.acos < 55 ? 'var(--accent)' : 'var(--red)';
  document.getElementById('f-streak').textContent    = G.bestStreak;
  document.getElementById('final-emoji').textContent = acc >= 80 ? 'üèÜ' : acc >= 60 ? 'ü•à' : 'üíÄ';

  document.getElementById('final-screen').style.display = 'flex';
}

function restartGame() {
  document.getElementById('final-screen').style.display = 'none';
  document.getElementById('lv-screen').style.display    = 'none';
  // Reset state and go back to start
  G.levelIdx=0; G.score=0; G.correct=0; G.wrong=0; G.acos=30; G.streak=0; G.bestStreak=0; G.multiplier=1; G.running=false;
  document.getElementById('start-screen').style.display='flex';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  HUD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function updateHUD() {
  document.getElementById('h-score').textContent   = G.score.toLocaleString();
  document.getElementById('h-correct').textContent = G.correct;
  document.getElementById('h-wrong').textContent   = G.wrong;
  document.getElementById('h-streak').textContent  = G.streak;
  const a = Math.round(G.acos);
  const acosEl = document.getElementById('h-acos');
  acosEl.textContent = a + '%';
  acosEl.className = 'stat-val ' + (a < 30 ? 'g' : a < 50 ? '' : 'r');
  document.getElementById('s-multi').textContent   = '√ó' + G.multiplier.toFixed(1);
  document.getElementById('s-correct').textContent = G.correct;
  document.getElementById('s-wrong').textContent   = G.wrong;
}

function updateProgressBar() {
  const lv = LEVELS[G.levelIdx];
  const pct = lv ? (G.qIdx / lv.qCount * 100) : 100;
  document.getElementById('level-bar-fill').style.width = pct + '%';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  UI HELPERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showFeedback(type, msg) {
  const el = document.getElementById('feedback');
  el.textContent = msg;
  el.className = 'show ' + type;
}
function clearFeedback() {
  const el = document.getElementById('feedback');
  el.className = '';
  el.textContent = '';
}
function enableButtons()  { ['btn-crush','btn-kill','btn-spy'].forEach(id=>{ document.getElementById(id).classList.remove('disabled'); }); }
function disableButtons() { ['btn-crush','btn-kill','btn-spy'].forEach(id=>{ document.getElementById(id).classList.add('disabled'); }); }

function flashCard(result) {
  const card = document.getElementById('kw-card');
  card.classList.remove('flash-correct','flash-wrong');
  void card.offsetWidth;
  card.classList.add(result==='correct'?'flash-correct':'flash-wrong');
}

function flashBtn(action, correct) {
  const map = { crush:'btn-crush', kill:'btn-kill', spy:'btn-spy' };
  const el  = document.getElementById(map[action]);
  el.classList.add(correct?'btn-lit-good':'btn-lit-bad');
  setTimeout(()=>el.classList.remove('btn-lit-good','btn-lit-bad'), 350);
}

function floatFx(txt, col) {
  const el = document.createElement('div');
  el.className = 'float-fx';
  el.textContent = txt;
  el.style.cssText = 'left:50%;top:40%;transform:translateX(-50%);color:'+col+';text-align:center;';
  document.body.appendChild(el);
  setTimeout(()=>el.remove(), 1200);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  EXPLANATION TEXT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function explainCorrect(action) {
  const msgs = {
    crush: 'Great ACOS ‚Äî increase that bid!',
    kill:  'Wasteful spend correctly paused!',
    spy:   'Ambiguous data flagged for research!',
  };
  return msgs[action];
}
function explainWrong(action, correctType) {
  const correct = correctType === 'winner' ? 'CRUSH' : correctType === 'loser' ? 'KILL' : 'SPY';
  return 'That was a ' + correctType.toUpperCase() + ' keyword ‚Äî should have been ' + correct + '.';
}
function correctLabel(type) {
  return type==='winner'?'‚ö° CRUSH (good ACOS)':type==='loser'?'üíÄ KILL (waste spend)':'üîç SPY (needs analysis)';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  KEYBOARD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
document.addEventListener('keydown', e => {
  if (!G.running) return;
  const map = { q:'crush', w:'kill', e:'spy' };
  const act = map[e.key.toLowerCase()];
  if (act) { e.preventDefault(); answer(act); }
});
</script>
</body>
</html>
